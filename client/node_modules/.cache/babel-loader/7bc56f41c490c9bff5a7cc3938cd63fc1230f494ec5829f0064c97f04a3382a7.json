{"ast":null,"code":"var _jsxFileName = \"/Users/thomasphan/Desktop/listen-with-me-app/client/src/components/Room.js\",\n  _s = $RefreshSig$();\nimport RoomHeader from './RoomHeader';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Spotify } from 'react-spotify-embed';\nimport { useEffect, useState } from 'react';\nimport '../index.css';\nimport io from 'socket.io-client';\nimport KeyContainer from './KeyContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect('http://localhost:3001'); // url from backend server\n\nconst Room = ({\n  roomKey,\n  name\n}) => {\n  _s();\n  const tracks = [\"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f84\", \"https://open.spotify.com/album/0fUy6IdLHDpGNwavIlhEsl?si=mTiITmlHQpaGkoivGTv8Jw\", \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f83\"];\n  const SEARCH_ENDPOINT = 'https://api.spotify.com/v1/search';\n  const [track, setTrack] = useState(tracks[0]);\n  const [users, setUsers] = useState([]);\n  const [query, setQuery] = useState('');\n  const [queryType, setType] = useState('Song');\n\n  // useEffect(() => { // get this object from API call in object\n  //     console.log(key)\n\n  //     const getFriends = async () => {\n  //         try {\n  //             const res = await fetch('http://localhost:3001/friends/' , {\n  //                 method: 'POST',\n  //                 headers: {\n  //                     'Content-Type': 'application/json'\n  //                 },\n  //                 body: JSON.stringify({\n  //                     sessionKey: key\n  //                 })\n  //             })\n\n  //             const users = await res.json()\n  //             setUsers(users)\n  //             console.log(users)\n  //         } catch (error) {\n  //             console.log(error)\n  //         }\n  //     }\n\n  //     getFriends()\n  // }, [key])\n\n  const onInput = e => {\n    const [track, artist] = e.target.value.split('by');\n    alert(track + artist);\n    setQuery(e.target.value);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n  };\n  const generateSong = () => {\n    let randTrack = getRandomNumberInRange();\n    console.log(randTrack);\n    setTrack(tracks[randTrack]);\n    socket.emit('change_song', {\n      song: tracks[randTrack],\n      room: roomKey\n    });\n  };\n  const getRandomNumberInRange = () => {\n    return Math.floor(Math.random() * (tracks.length - 1 - 0 + 1)) + 0;\n  };\n  const changeType = e => {\n    setType(e.target.textContent);\n  };\n  useEffect(() => {\n    // run this whenever socket changes (receives events)\n    socket.on('new_song', data => {\n      setTrack(data);\n    });\n  }, [socket]);\n  useEffect(() => {\n    // run this only on initial render\n    socket.emit('join_room', {\n      room: roomKey\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-header\",\n      children: [/*#__PURE__*/_jsxDEV(RoomHeader, {\n        name: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(KeyContainer, {\n        roomKey: roomKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Search for a song (in the format)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"search-form\",\n        onSubmit: handleSearch,\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          onInput: onInput,\n          placeholder: \"Trophies by Drake\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n          id: \"dropdown-basic-button\",\n          title: queryType,\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Song\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Album\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Artist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Playlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Spotify, {\n      link: 'https://open.spotify.com/artist/0Y5tJX1MQlPlqiwlOH1tJY'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n_s(Room, \"fKabWeojULKi2g2x8UK9DHoWR6E=\");\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["RoomHeader","Dropdown","DropdownButton","Form","Button","Spotify","useEffect","useState","io","KeyContainer","jsxDEV","_jsxDEV","socket","connect","Room","roomKey","name","_s","tracks","SEARCH_ENDPOINT","track","setTrack","users","setUsers","query","setQuery","queryType","setType","onInput","e","artist","target","value","split","alert","handleSearch","preventDefault","generateSong","randTrack","getRandomNumberInRange","console","log","emit","song","room","Math","floor","random","length","changeType","textContent","on","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","Control","type","placeholder","id","title","Item","onClick","link","_c","$RefreshReg$"],"sources":["/Users/thomasphan/Desktop/listen-with-me-app/client/src/components/Room.js"],"sourcesContent":["import RoomHeader from './RoomHeader'\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Spotify } from 'react-spotify-embed'\nimport { useEffect, useState } from 'react';\nimport '../index.css'\nimport io from 'socket.io-client'\nimport KeyContainer from './KeyContainer';\n\nconst socket = io.connect('http://localhost:3001') // url from backend server\n\nconst Room = ({ roomKey, name }) => {\n    const tracks = [\n            \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f84\",\n            \"https://open.spotify.com/album/0fUy6IdLHDpGNwavIlhEsl?si=mTiITmlHQpaGkoivGTv8Jw\",\n            \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f83\"\n    ]\n    const SEARCH_ENDPOINT = 'https://api.spotify.com/v1/search'\n    const [track, setTrack] = useState(tracks[0])\n    const [users, setUsers] = useState([])\n    const [query, setQuery] = useState('')\n    const [queryType, setType] = useState('Song')\n\n    \n    // useEffect(() => { // get this object from API call in object\n    //     console.log(key)\n\n    //     const getFriends = async () => {\n    //         try {\n    //             const res = await fetch('http://localhost:3001/friends/' , {\n    //                 method: 'POST',\n    //                 headers: {\n    //                     'Content-Type': 'application/json'\n    //                 },\n    //                 body: JSON.stringify({\n    //                     sessionKey: key\n    //                 })\n    //             })\n    \n    //             const users = await res.json()\n    //             setUsers(users)\n    //             console.log(users)\n    //         } catch (error) {\n    //             console.log(error)\n    //         }\n    //     }\n\n    //     getFriends()\n    // }, [key])\n\n    const onInput = (e) => {\n        const [track, artist] = (e.target.value).split('by')\n        alert(track + artist)\n\n        setQuery(e.target.value)\n    }\n\n    const handleSearch = (e) => {\n        e.preventDefault()\n\n\n\n    }\n\n    const generateSong = () => {\n        let randTrack = getRandomNumberInRange()\n        console.log(randTrack)\n        setTrack(tracks[randTrack])\n        socket.emit('change_song', { song: tracks[randTrack], room: roomKey })\n    }\n\n    const getRandomNumberInRange = () => {\n        return Math.floor(Math.random() * ((tracks.length - 1) - 0 + 1)) + 0;\n    }\n\n    const changeType = (e) => {\n        setType(e.target.textContent)\n    }\n\n    useEffect(() => { // run this whenever socket changes (receives events)\n        socket.on('new_song', (data) => { \n            setTrack(data)\n        })\n    }, [socket]) \n    \n    useEffect(() => { // run this only on initial render\n        socket.emit('join_room', { room: roomKey })\n    }, [])\n\n    return (\n        <div className=\"room\">\n            <div className=\"room-header\">\n                <RoomHeader name={name}/>\n                <KeyContainer roomKey={roomKey}/>\n            </div>\n\n            <div className=\"room-body\">\n                <p>Search for a song (in the format)</p>\n                <Form className=\"search-form\" onSubmit={handleSearch}> \n                    <Form.Control type=\"text\" onInput={onInput} placeholder='Trophies by Drake'/>\n                    <DropdownButton id=\"dropdown-basic-button\" title={queryType}>\n                        <Dropdown.Item onClick={changeType}>Song</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Album</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Artist</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Playlist</Dropdown.Item>\n                    </DropdownButton>\n                </Form> \n                {/* <Button className=\"random-btn\" onClick={generateSong}>Change song</Button> */}\n            </div>\n            \n        \n            <Spotify link={'https://open.spotify.com/artist/0Y5tJX1MQlPlqiwlOH1tJY'} />\n\n            {/* <Dropdown>\n                <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                friends\n                </Dropdown.Toggle>\n        \n                <Dropdown.Menu>\n                    {users.map((user, index) => {\n                        return <Dropdown.Item key={index}>{user}</Dropdown.Item>;\n                    })}\n                </Dropdown.Menu>\n            </Dropdown>  */}\n        </div>\n       \n    )\n}\n\nexport default Room"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}