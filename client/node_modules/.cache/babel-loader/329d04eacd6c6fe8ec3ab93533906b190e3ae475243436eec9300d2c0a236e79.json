{"ast":null,"code":"var _jsxFileName = \"/Users/thomasphan/Desktop/listen-with-me-app/client/src/components/Room.js\",\n  _s = $RefreshSig$();\nimport RoomHeader from './RoomHeader';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Spotify } from 'react-spotify-embed';\nimport { useEffect, useState } from 'react';\nimport '../index.css';\nimport io from 'socket.io-client';\nimport KeyContainer from './KeyContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect('http://localhost:3001'); // url from backend server\n\nconst Room = ({\n  roomKey,\n  name\n}) => {\n  _s();\n  const tracks = [\"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f84\", \"https://open.spotify.com/album/0fUy6IdLHDpGNwavIlhEsl?si=mTiITmlHQpaGkoivGTv8Jw\", \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f83\"];\n  const [track, setTrack] = useState(tracks[0]);\n  const [users, setUsers] = useState([]);\n  const [query, setQuery] = useState('');\n  const [queryType, setType] = useState('Song');\n\n  // useEffect(() => { // get this object from API call in object\n  //     console.log(key)\n\n  //     const getFriends = async () => {\n  //         try {\n  //             const res = await fetch('http://localhost:3001/friends/' , {\n  //                 method: 'POST',\n  //                 headers: {\n  //                     'Content-Type': 'application/json'\n  //                 },\n  //                 body: JSON.stringify({\n  //                     sessionKey: key\n  //                 })\n  //             })\n\n  //             const users = await res.json()\n  //             setUsers(users)\n  //             console.log(users)\n  //         } catch (error) {\n  //             console.log(error)\n  //         }\n  //     }\n\n  //     getFriends()\n  // }, [key])\n\n  const onInput = e => {\n    setQuery(e.target.value);\n  };\n  const generateSong = () => {\n    let randTrack = getRandomNumberInRange();\n    console.log(randTrack);\n    setTrack(tracks[randTrack]);\n    socket.emit('change_song', {\n      song: tracks[randTrack],\n      room: roomKey\n    });\n  };\n  const getRandomNumberInRange = () => {\n    return Math.floor(Math.random() * (tracks.length - 1 - 0 + 1)) + 0;\n  };\n  const changeType = e => {\n    setType(e.target.textContent);\n  };\n  useEffect(() => {\n    // run this whenever socket changes (receives events)\n    socket.on('new_song', data => {\n      setTrack(data);\n    });\n  }, [socket]);\n  useEffect(() => {\n    // run this only on initial render\n    socket.emit('join_room', {\n      room: roomKey\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"room\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-header\",\n      children: [/*#__PURE__*/_jsxDEV(RoomHeader, {\n        name: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(KeyContainer, {\n        roomKey: roomKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-body\",\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        className: \"search-form\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          onInput: onInput,\n          placeholder: 'search for a' + {\n            queryType\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n          id: \"dropdown-basic-button\",\n          title: queryType,\n          children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Song\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Album\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Artist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            onClick: changeType,\n            children: \"Playlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(Room, \"fKabWeojULKi2g2x8UK9DHoWR6E=\");\n_c = Room;\nexport default Room;\nvar _c;\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"names":["RoomHeader","Dropdown","DropdownButton","Form","Button","Spotify","useEffect","useState","io","KeyContainer","jsxDEV","_jsxDEV","socket","connect","Room","roomKey","name","_s","tracks","track","setTrack","users","setUsers","query","setQuery","queryType","setType","onInput","e","target","value","generateSong","randTrack","getRandomNumberInRange","console","log","emit","song","room","Math","floor","random","length","changeType","textContent","on","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Label","Control","type","placeholder","id","title","Item","onClick","_c","$RefreshReg$"],"sources":["/Users/thomasphan/Desktop/listen-with-me-app/client/src/components/Room.js"],"sourcesContent":["import RoomHeader from './RoomHeader'\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { Spotify } from 'react-spotify-embed'\nimport { useEffect, useState } from 'react';\nimport '../index.css'\nimport io from 'socket.io-client'\nimport KeyContainer from './KeyContainer';\n\nconst socket = io.connect('http://localhost:3001') // url from backend server\n\nconst Room = ({ roomKey, name }) => {\n    const tracks = [\n            \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f84\",\n            \"https://open.spotify.com/album/0fUy6IdLHDpGNwavIlhEsl?si=mTiITmlHQpaGkoivGTv8Jw\",\n            \"https://open.spotify.com/track/5ihDGnhQgMA0F0tk9fNLlA?si=4472348a63dd4f83\"\n    ]\n    const [track, setTrack] = useState(tracks[0])\n    const [users, setUsers] = useState([])\n    const [query, setQuery] = useState('')\n    const [queryType, setType] = useState('Song')\n\n    \n    // useEffect(() => { // get this object from API call in object\n    //     console.log(key)\n\n    //     const getFriends = async () => {\n    //         try {\n    //             const res = await fetch('http://localhost:3001/friends/' , {\n    //                 method: 'POST',\n    //                 headers: {\n    //                     'Content-Type': 'application/json'\n    //                 },\n    //                 body: JSON.stringify({\n    //                     sessionKey: key\n    //                 })\n    //             })\n    \n    //             const users = await res.json()\n    //             setUsers(users)\n    //             console.log(users)\n    //         } catch (error) {\n    //             console.log(error)\n    //         }\n    //     }\n\n    //     getFriends()\n    // }, [key])\n\n    const onInput = (e) => {\n        setQuery(e.target.value)\n    }\n\n    const generateSong = () => {\n        let randTrack = getRandomNumberInRange()\n        console.log(randTrack)\n        setTrack(tracks[randTrack])\n        socket.emit('change_song', { song: tracks[randTrack], room: roomKey })\n    }\n\n    const getRandomNumberInRange = () => {\n        return Math.floor(Math.random() * ((tracks.length - 1) - 0 + 1)) + 0;\n    }\n\n    const changeType = (e) => {\n        setType(e.target.textContent)\n    }\n\n    useEffect(() => { // run this whenever socket changes (receives events)\n        socket.on('new_song', (data) => { \n            setTrack(data)\n        })\n    }, [socket]) \n    \n    useEffect(() => { // run this only on initial render\n        socket.emit('join_room', { room: roomKey })\n    }, [])\n\n    return (\n        <div className=\"room\">\n            <div className=\"room-header\">\n                <RoomHeader name={name}/>\n                <KeyContainer roomKey={roomKey}/>\n            </div>\n\n            <div className=\"room-body\">\n                <Form className=\"search-form\"> \n                    <Form.Label></Form.Label>\n                    <Form.Control type=\"text\" onInput={onInput} placeholder={'search for a' + {queryType}}/>\n                    <DropdownButton id=\"dropdown-basic-button\" title={queryType}>\n                        <Dropdown.Item onClick={changeType}>Song</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Album</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Artist</Dropdown.Item>\n                        <Dropdown.Item onClick={changeType}>Playlist</Dropdown.Item>\n                    </DropdownButton>\n                </Form> \n                {/* <Button className=\"random-btn\" onClick={generateSong}>Change song</Button> */}\n            </div>\n            \n        \n            {/* <Spotify link={track} /> */}\n\n            {/* <Dropdown>\n                <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                friends\n                </Dropdown.Toggle>\n        \n                <Dropdown.Menu>\n                    {users.map((user, index) => {\n                        return <Dropdown.Item key={index}>{user}</Dropdown.Item>;\n                    })}\n                </Dropdown.Menu>\n            </Dropdown>  */}\n        </div>\n       \n    )\n}\n\nexport default Room"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}